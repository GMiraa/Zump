<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <h1>Cadastro</h1>
    
    <p>Nome</p>
    <input type="text" id="input_nome">
    
    <p>Email</p>
    <input type="text" id="input_email"><br>
    
    <p>Senha</p>
    <input type="text" id="input_senha"><br>

    <div id="mensagem"></div>

    <button onclick="Cadastrar">Cadastrar</button>

</body>
</html>

<script>

    var nome = input_nome.value;
    var email = input_email.value;
    var senha = input_senha.value;
    var tipo = "Comum"

    async function Cadastrar() {

        if(nome == "" || email == "" || senha == ""){

            mensagem.innerHTML = "Um ou mais campos <b>obrigat√≥rios vazios</b>";
            setTimeout(() => {
                mensagem.innerHTML = "";                
            }, 4000);            

        }
        
        fetch('/usuarios/cadastrar', {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify({
              nomeServer: nome,
              emailServer: email,
              senhaServer: senha,
              tipoServer: tipo
            })
          })
          alert("Cadastro realizado com sucesso")
          setTimeout(() => {
            window.location = "./login.html";
          }, 1000);

    }

</script>